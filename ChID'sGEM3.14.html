<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chidambaram AI Engine V3.5</title>
    <style>
        :root { --bg: #020617; --card: #1e293b; --accent: #38bdf8; --text: #f1f5f9; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--bg); color: var(--text); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; }
        .title-bar { height: 32px; background: #000; -webkit-app-region: drag; display: flex; align-items: center; padding: 0 15px; font-size: 10px; color: #94a3b8; border-bottom: 1px solid #1e293b; letter-spacing: 1px; }
        .app-container { display: flex; flex-direction: column; height: calc(100% - 32px); width: 100%; }
        .header { padding: 12px; text-align: center; background: var(--card); border-bottom: 1px solid #334155; }
        .header h1 { margin: 0; font-size: 1rem; color: var(--accent); text-transform: uppercase; }
        #chat { flex-grow: 1; padding: 20px; overflow-y: auto; background: #0b0f1a; display: flex; flex-direction: column; gap: 12px; }
        .msg { padding: 12px 16px; border-radius: 12px; font-size: 0.95rem; max-width: 85%; line-height: 1.5; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .ai { background: #1e293b; align-self: flex-start; border-bottom-left-radius: 2px; border: 1px solid #334155; }
        .user { background: var(--accent); color: #020617; align-self: flex-end; border-bottom-right-radius: 2px; font-weight: 600; }
        .debug-msg { background: #450a0a; color: #fecaca; align-self: center; font-size: 0.75rem; border: 1px solid #991b1b; padding: 8px; border-radius: 5px; }
        .input-box { padding: 20px; background: var(--card); display: flex; gap: 12px; border-top: 1px solid #334155; }
        input { flex-grow: 1; background: #0f172a; border: 1px solid #334155; border-radius: 8px; color: white; padding: 12px; font-size: 1rem; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--accent); box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.2); }
        button { background: var(--accent); color: #020617; border: none; border-radius: 8px; padding: 0 25px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #7dd3fc; transform: translateY(-1px); }
    </style>
</head>
<body>
    <div class="title-bar">CHIDAMBARAM AI ENGINE - STABLE 2026</div>
    <div class="app-container">
        <div class="header"><h1>ChID's Gem 3.14</hi>
                               <h1>by Chidambaram Saravanan</h1></div>
        <div id="chat"><div class="msg ai">Hello! How can I help you today?</div></div>
        <div class="input-box">
            <input type="text" id="userInput" placeholder="Type your instruction..." onkeypress="if(event.key==='Enter') startQuery()">
            <button id="btn" onclick="startQuery()">SEND</button>
        </div>
    </div>

<script>
    // 1. YOUR API KEY
    const KEY = "AIzaSyASOyepeNDnG-k99qvJqY2e5hO6dN0NMTI"; 

    // 2. MODERN 2026 MODEL ALIAS
    const MODEL = "gemini-3-flash-preview"; 

    async function startQuery() {
        const input = document.getElementById('userInput');
        const btn = document.getElementById('btn');
        const text = input.value.trim();
        
        if (!text) return;
        if (KEY === "PASTE_YOUR_KEY_HERE") {
            addMsg("SYSTEM: Please paste your API key in the script section.", "debug-msg");
            return;
        }

        addMsg(text, 'user');
        input.value = '';
        btn.disabled = true;

        try {
            // Using v1beta with the new Gemini 3 model ID
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL}:generateContent?key=${KEY}`;
            
            const response = await fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ contents: [{ parts: [{ text: text }] }] })
            });

            const data = await response.json();

            if (data.error) {
                // Displaying the exact error for Chidambaram to see
                addMsg(`API Error (${data.error.code}): ${data.error.message}`, "debug-msg");
            } else {
                const reply = data.candidates[0].content.parts[0].text;
                addMsg(reply, 'ai');
            }
        } catch (err) {
            addMsg("NETWORK ERROR: Check your connection or the model name.", "debug-msg");
        } finally {
            btn.disabled = false;
        }
    }

    function addMsg(msg, type) {
        const chat = document.getElementById('chat');
        const div = document.createElement('div');
        div.className = `msg ${type}`;
        div.innerText = msg;
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }
</script>
</body>
</html>